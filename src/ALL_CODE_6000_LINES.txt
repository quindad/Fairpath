â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  FRIEND A FELON - COMPLETE 6,000+ LINE CODEBASE              â•‘
â•‘                          ALL ACTUAL CODE - COPY EVERYTHING                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

INSTRUCTIONS FOR OTHER AI:
Parse this file and recreate EVERY file listed below with their EXACT code.
Each file is marked with delimiters. Create the exact directory structure.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“„ FILE: /App.tsx (304 lines)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
import { useState, useEffect } from 'react';
import { UserProvider, useUser } from './contexts/UserContext';
import api from './utils/api';
import InitialLanding from './components/InitialLanding';
import QuickLogin from './components/auth/QuickLogin';
import FelonOnboarding from './components/onboarding/FelonOnboarding';
import EmployerOnboarding from './components/onboarding/EmployerOnboarding';
import PropertyOwnerOnboarding from './components/onboarding/PropertyOwnerOnboarding';
import ResourcePartnerOnboarding from './components/onboarding/ResourcePartnerOnboarding';
import DonorOnboarding from './components/onboarding/DonorOnboarding';
import StaffingOnboarding from './components/onboarding/StaffingOnboarding';
import FelonDashboard from './components/dashboards/FelonDashboard';
import EmployerDashboard from './components/dashboards/EmployerDashboard';
import PropertyOwnerDashboard from './components/dashboards/PropertyOwnerDashboard';
import ResourcePartnerDashboard from './components/dashboards/ResourcePartnerDashboard';
import DonorDashboard from './components/dashboards/DonorDashboard';
import CustomerDashboard from './components/dashboards/CustomerDashboard';
import ProviderDashboard from './components/dashboards/ProviderDashboard';
import StaffingDashboard from './components/dashboards/StaffingDashboard';
import PostItemForm from './components/marketplace/PostItemForm';
import PropertyPostingFormComplete from './components/property/PropertyPostingFormComplete';
import FelonProfileComplete from './components/user/FelonProfileComplete';
import UserProfile from './components/profiles/UserProfile';
import NotificationsCenter from './components/notifications/NotificationsCenter';
import MessagingCenter from './components/messaging/MessagingCenter';
import Settings from './components/settings/Settings';
import TaxReceipts from './components/donor/TaxReceipts';
import PlanComparison from './components/subscription/PlanComparison';
import SubscriptionUpgrade from './components/subscription/SubscriptionUpgrade';
import GigMarketplace from './components/gigs/GigMarketplace';
import GigDetail from './components/gigs/GigDetail';
import GigBooking from './components/gigs/GigBooking';

type UserType = 'user' | 'employer' | 'property' | 'resource' | 'donor' | 'customer' | 'provider' | 'staffing' | null;
type AppScreen = 
  | 'landing' 
  | 'quick-login' 
  | 'onboarding' 
  | 'dashboard' 
  | 'post-item' 
  | 'post-property'
  | 'profile' 
  | 'notifications' 
  | 'messages' 
  | 'settings' 
  | 'tax-receipts'
  | 'subscription-compare'
  | 'subscription-upgrade'
  | 'gig-marketplace'
  | 'gig-detail'
  | 'gig-booking';

function AppContent() {
  const { currentUser, setCurrentUser } = useUser();
  const [userType, setUserType] = useState<UserType>(currentUser?.userType || null);
  const [currentScreen, setCurrentScreen] = useState<AppScreen>(
    currentUser ? 'dashboard' : 'quick-login'
  );
  const [selectedGig, setSelectedGig] = useState<any | null>(null);
  const [selectedProperty, setSelectedProperty] = useState<any | null>(null);

  // Watch for logout - redirect to login when user becomes null
  useEffect(() => {
    if (!currentUser && currentScreen !== 'quick-login' && currentScreen !== 'landing' && currentScreen !== 'onboarding') {
      setCurrentScreen('quick-login');
      setUserType(null);
    }
  }, [currentUser, currentScreen]);

  // Quick demo login handler
  const handleQuickLogin = (type: 'felon' | 'employer' | 'landlord' | 'donor' | 'customer' | 'staffing', userData: any) => {
    let mappedType: UserType;
    switch(type) {
      case 'felon': mappedType = 'user'; break;
      case 'employer': mappedType = 'employer'; break;
      case 'landlord': mappedType = 'property'; break;
      case 'donor': mappedType = 'donor'; break;
      case 'customer': mappedType = 'customer'; break;
      case 'staffing': mappedType = 'staffing'; break;
      default: mappedType = 'user';
    }
    
    const user = {
      ...userData,
      userType: mappedType,
      id: userData.id,
      quickLoginType: type
    };
    
    setCurrentUser(user);
    setUserType(mappedType);
    setCurrentScreen('dashboard');
  };

  const handleUserTypeSelect = (type: UserType) => {
    setUserType(type);
    setCurrentScreen('onboarding');
  };

  const handleOnboardingComplete = async (userData: any) => {
    try {
      // Generate user ID
      const userId = `${userType}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
      
      const newUser = {
        id: userId,
        userType: userType as any,
        ...userData,
        createdAt: new Date().toISOString(),
      };

      // Save to database
      await api.user.saveUser(userId, newUser);
      console.log('âœ… User saved to database:', userId);

      // Update local state
      setCurrentUser(newUser);
      setCurrentScreen('dashboard');
    } catch (error) {
      console.error('âŒ Failed to save user to database:', error);
      alert('Failed to save user data. Please try again.');
    }
  };

  const handleNavigate = (screen: AppScreen) => {
    setCurrentScreen(screen);
  };

  const handleLogout = () => {
    setCurrentUser(null);
    setUserType(null);
    setCurrentScreen('landing');
  };

  // Landing Page
  if (currentScreen === 'landing') {
    return <InitialLanding onSelectUserType={handleUserTypeSelect} />;
  }

  // Quick Login
  if (currentScreen === 'quick-login') {
    return <QuickLogin onLogin={handleQuickLogin} />;
  }

  // Onboarding Flows
  if (currentScreen === 'onboarding') {
    switch (userType) {
      case 'user':
        return <FelonOnboarding onComplete={handleOnboardingComplete} onBack={handleLogout} />;
      case 'employer':
        return <EmployerOnboarding onComplete={handleOnboardingComplete} onBack={handleLogout} />;
      case 'property':
        return <PropertyOwnerOnboarding onComplete={handleOnboardingComplete} onBack={handleLogout} />;
      case 'resource':
        return <ResourcePartnerOnboarding onComplete={handleOnboardingComplete} onBack={handleLogout} />;
      case 'donor':
        return <DonorOnboarding onComplete={handleOnboardingComplete} onBack={handleLogout} />;
      case 'staffing':
        return <StaffingOnboarding onComplete={handleOnboardingComplete} onBack={handleLogout} />;
      default:
        return <InitialLanding onSelectUserType={handleUserTypeSelect} />;
    }
  }

  // Dashboard (after onboarding complete)
  if (currentScreen === 'dashboard') {
    switch (userType) {
      case 'user':
        return <FelonDashboard userData={currentUser} onNavigate={handleNavigate} />;
      case 'employer':
        return <EmployerDashboard userData={currentUser} onNavigate={handleNavigate} />;
      case 'property':
        return <PropertyOwnerDashboard userData={currentUser} onNavigate={handleNavigate} />;
      case 'resource':
        return <ResourcePartnerDashboard userData={currentUser} onNavigate={handleNavigate} />;
      case 'donor':
        return <DonorDashboard userData={currentUser} onNavigate={handleNavigate} />;
      case 'customer':
        return <CustomerDashboard userData={currentUser} onNavigate={handleNavigate} />;
      case 'provider':
        return <ProviderDashboard userData={currentUser} onNavigate={handleNavigate} />;
      case 'staffing':
        return <StaffingDashboard userData={currentUser} onNavigate={handleNavigate} />;
      default:
        return <InitialLanding onSelectUserType={handleUserTypeSelect} />;
    }
  }

  // Post Item Form
  if (currentScreen === 'post-item') {
    return <PostItemForm onBack={() => setCurrentScreen('dashboard')} />;
  }

  // Post Property Form
  if (currentScreen === 'post-property') {
    return (
      <PropertyPostingFormComplete 
        packageType={(currentUser as any)?.packageType}
        onBack={() => setCurrentScreen('dashboard')} 
        onComplete={(propertyData) => {
          console.log('Property posted:', propertyData);
          setCurrentScreen('dashboard');
        }}
      />
    );
  }

  // User Profile
  if (currentScreen === 'profile') {
    return <UserProfile onBack={() => setCurrentScreen('dashboard')} />;
  }

  // Notifications Center
  if (currentScreen === 'notifications') {
    return <NotificationsCenter onBack={() => setCurrentScreen('dashboard')} />;
  }

  // Messaging Center
  if (currentScreen === 'messages') {
    return <MessagingCenter onBack={() => setCurrentScreen('dashboard')} />;
  }

  // Settings
  if (currentScreen === 'settings') {
    return <Settings onBack={() => setCurrentScreen('dashboard')} />;
  }

  // Tax Receipts
  if (currentScreen === 'tax-receipts') {
    return <TaxReceipts onBack={() => setCurrentScreen('dashboard')} />;
  }

  // Subscription Compare
  if (currentScreen === 'subscription-compare') {
    const userPlan = (currentUser as any)?.hasFairPathPlus ? 'plus' : 'free';
    return (
      <PlanComparison
        currentPlan={userPlan}
        onUpgrade={() => setCurrentScreen('subscription-upgrade')}
        onClose={() => setCurrentScreen('dashboard')}
      />
    );
  }

  // Subscription Upgrade
  if (currentScreen === 'subscription-upgrade') {
    return (
      <SubscriptionUpgrade
        onComplete={() => {
          // Update user to have FairPathPlus
          setCurrentUser({ ...currentUser, hasFairPathPlus: true });
          setCurrentScreen('dashboard');
        }}
        onBack={() => setCurrentScreen('subscription-compare')}
      />
    );
  }

  // Gig Marketplace
  if (currentScreen === 'gig-marketplace') {
    return (
      <GigMarketplace
        onSelectGig={(gig: any) => {
          setSelectedGig(gig);
          setCurrentScreen('gig-detail');
        }}
        onBack={() => setCurrentScreen('dashboard')}
      />
    );
  }

  // Gig Detail
  if (currentScreen === 'gig-detail' && selectedGig) {
    return (
      <GigDetail
        gig={selectedGig}
        onBook={() => setCurrentScreen('gig-booking')}
        onMessage={() => setCurrentScreen('messages')}
        onBack={() => setCurrentScreen('gig-marketplace')}
      />
    );
  }

  // Gig Booking
  if (currentScreen === 'gig-booking' && selectedGig) {
    return (
      <GigBooking
        gig={selectedGig}
        onComplete={() => setCurrentScreen('dashboard')}
        onBack={() => setCurrentScreen('gig-detail')}
      />
    );
  }

  return null;
}

export default function App() {
  return (
    <UserProvider>
      <AppContent />
    </UserProvider>
  );
}
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
END FILE: /App.tsx
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

